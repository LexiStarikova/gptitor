# API for GPTитор

## Overview

This directory is a part of GPTитор that provides an API built using FastAPI. It includes various components for handling different functionalities such as database interactions, routing, authentication, and utilities. The API documentation can be accessed at [Swagger Documentation](http://10.100.30.244:1330/docs) within the Innopolis network.

## Directory Structure

```
API/
├── Core/
│   ├── main.py
│   ├── database.py
│   ├── models.py
│   ├── schemas.py
│   └── crud.py
├── Routers/
│   ├── conversations.py
│   ├── messages.py
│   ├── feedback.py
│   ├── categories.py
│   ├── tasks.py
│   ├── llms.py
│   └── profile.py
├── Utilities/
│   ├── conversation.py
│   ├── feedback.py
│   ├── llm.py
│   └── init_db.py
├── Authentication/
│   └── auth.py
├── Data/
│   ├── categories.json
│   ├── tasksRus.json
│   ├── tasksEng.json
│   └── llms.json
├── Tests/
│   ├── pytest.ini
│   ├── conftest.py
│   ├── tasksEng.json
│   └── llms.json
├── gptitor.db
├── requirements.txt
└── pytest.ini
```


## Usage

### Running the Server

To start the server, run:

```sh
uvicorn Core.main:app --reload
```

The API will be accessible at `http://127.0.0.1:8000`.

### API Endpoints

Detailed API documentation is available at [Swagger Documentation](http://10.100.30.244:1330/docs).

### Initial Data Loading

Initial data can be loaded into the database from JSON files located in the `API/Data` directory.

## Testing & Linting

### Running Tests

Tests are located in the `API/Tests` directory and can be run using `pytest`.

```sh
pytest
```

### Getting the Report

Results are also placed in the `API/Tests` directory. Additionaly, the linting report can be obtained using `flake8`.

```sh
flake8 --format=html --htmldir=Tests/flake8-report . -v
```

## API Components

### Core

- **main.py**: Entry point of the application.
- **database.py**: Database connection setup.
- **models.py**: Database models.
- **schemas.py**: Pydantic schemas for data validation.
- **crud.py**: CRUD operations.

### Routers

Contains the route definitions for different parts of the application.

### Utilities

Contains utility functions for initial data loading and interacting with LLMs.

### Authentication

Contains scripts for user authentication (currently in draft).

### Data

Contains initial data in JSON format to be loaded into the database when the application is starting.

### Tests

Contains test files designed to test CRUD functions using `pytest`, stores the results of these tests and reports generated by `flake8` linting.